# 라우팅(Routing)
라우팅은 네트워크 안에서 데이터를 보낼 때 최적의 경로를 선택하는 과정이다. 최적의 경로는 데이터를 가장 짧은 거리, 혹은 가장 적은 시간 안에 전송할 수 있는 경로이다.

## 라우팅 방법
라우팅 방법은 크게 2가지로 구분한다.
- 정적 라우팅(Static Routing): 미리 정해진 루트를 따라 선택 (수동 경로 설정)
- 동적 라우팅(Dynamic Routing): 대규모 네트워크에서 인접한 라우터 간에 정보를 주고 받아 경로 선택 (자동 경로 설정)

정적 라우팅은 관리자에 의해 설정된 라우팅 정보를 참조하기 때문에 속도가 빠르고 안정적인 반면, 네트워크의 수가 많거나 빈번히 변경 될 경우 대응하기 어렵다.
동적 라우팅은 라우터간에 정보를 주고 받아 라우팅 정보를 자동으로 작성하기 때문에 네트워크가 자주 변경되어도 능동적으로 대처하지만, 메모리를 더 사용하게 된다.

## 라우팅 원리
라우터는 2가지의 역할을 수행한다.

1. 경로 정보를 얻는 역할
라우터는 라우팅 테이블을 보고 목적지에 향하기 위한 넥스트 홉(Next Hop, 인접한 라우터)을 찾는다. 

2. 패킷을 포워딩하는 역할
라우팅 테이블을 확인해 패킷의 IP 주소에 맞는 넥스트 홉에 포워딩한다. 이떄, 목적지 정보가 없다면 라우터는 패킷을 바로 버린다.

## 라우팅 프로토콜
- 자율 시스템(Autonomous System, AS): 라우터 집단
- IGP(Internal Gateway Protocol): AS 내부에서 사용하는 프로토콜 (RIP, IGRP, EIGRP, OSPF)
- EGP(Exterior Gateway Protocol): AS 간의 통신에서 사용되는 프로토콜 (BGP)

### RIP(Routing Information Protocol)
RIP는 UDP/IP에서 동작하는 라우팅 프로토콜이다.

RIP는 DVA 알고리즘으로 인접 호스트와의 경로를 동적으로 교환하여 목적지에 도달하기 위한 최단 경로를 결정하게 된다. 그 중 유효한 경로를 추출하여 라우팅 테이블에 기록한다.

RIP 특징
- 경로를 설정할 때 Hop 카운트가 최대 15개 까지만 허용됨
- 30초에 한번 라우팅 경로를 업데이트 함
- 메모리 등의 자원을 적게 사용하여 소규모 네트워크에서 효율적
- 전체 경로를 담은 라우팅 테이블을 브로드캐스팅함, 부하 유발 가능성이 있음

### OSPF(Open Shortest Path First)
OSPF는 링크 상태를 확인하여 최단 경로를 찾는 알고리즘으로 경로를 찾아 패킷을 전달해주는 라우팅 프로토콜이다.

OSPF는 최단 경로를 선택하기 위해 다익스트라의 Shortest Path First 알고리즘을 사용한다.

OSPF 특징
- 대역폭 속도를 가중치로하여 최단 경로를 계산함
- convergence time이 빠름
- 변경된 정보가 있을 때만 라우팅 정보 전송, 멀티캐스트로 전송
- Area라는 더 작은 네트워크로 나누어 관리하기 때문에 다른 Area에서 일어난 변화에 대해서는 라우팅 테이블이 변경되지 않음

### BGP(Border Gateway Protocol)
BGP는 AS간 라우팅 및 AS의 순서를 전송하기 위한 경로 지정 알고리즘을 보유한 프로토콜이다.

IGP를 사용하면 네트워크 및 장비에 부하 현상과 대역폭 고갈이 생길 수 있다. 따라서 BGP를 사용하게 되는데, 대용량의 라우팅 정보를 교환하는데에 최적화되어 있다.

BGP 특징
- 속도가 느리지만 대용량의 라우터 정보를 교환할 수 있음
- TCP 179 포트로 이웃을 맺음
- Policy나 Attribute에 따라 최적 경로를 선택
- Path Vector 방식 사용, AS 하나를 하나의 홉(hop)으로 계산
- 변경된 정보가 있을 때만 업데이트 및 전파함, 60초마다 BGP Keep Alive 메시지를 보냄

### Static
정적 라우팅은 관리자에 의해 수동으로 라우팅 테이블을 작성한다.

소규모 네트워크나 네트워크 변화가 거의 없는 환경에서 주로 사용한다.

Static 특징
- 사전에 작성된 라우팅 테이블을 사용함
- CPU 소모율이 낮고 보안에 좋음
- 네트워크 변화가 있는 경우 대응하기 어려움


## Reference
[라우터의 동작방식, 역할](https://majjangjjang.tistory.com/153)

[\[Network\] 라우터 (Router) 의 동작 방식](https://haeunyah.tistory.com/98)
